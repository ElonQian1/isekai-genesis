# ğŸ“ å‘½åè§„èŒƒè¯¦æƒ…

> **æ­¤æ–‡ä»¶å®šä¹‰é¡¹ç›®ä¸­æ‰€æœ‰å‘½åè§„åˆ™ï¼ŒAI ä»£ç†å¿…é¡»éµå®ˆ**

---

## ğŸ¯ æ ¸å¿ƒåŸåˆ™

```
1. æ¯ä¸ªæ¨¡å—æœ‰å”¯ä¸€å‰ç¼€ â†’ é˜²æ­¢è·¨æ¨¡å—æ··æ·†
2. å‰ç¼€ä¸€è‡´æ€§ â†’ æ–‡ä»¶åã€ç±»åã€å‡½æ•°åä½¿ç”¨ç›¸åŒå‰ç¼€
3. æ¥æºå¯è¿½æº¯ â†’ çœ‹åˆ°åå­—å°±çŸ¥é“å±äºå“ªä¸ªæ¨¡å—
```

---

## ğŸ“Š æ¨¡å—å‰ç¼€è¡¨

| æ¨¡å— | æ–‡ä»¶å‰ç¼€ | ç±»å‹å‰ç¼€ | å‡½æ•°å‰ç¼€ | ä½ç½® |
|------|----------|----------|----------|------|
| **game-core** | `gc_` | `Gc` | `gc_` | `crates/game-core/` |
| **game-wasm** | `gw_` | `Gw` | `gw_` | `crates/game-wasm/` |
| **game-server** | `gs_` | `Gs` | `gs_` | `crates/game-server/` |
| **client** | `cl_` | `Cl` | `cl` | `client/src/` |

---

## ğŸ¦€ Rust å‘½åè§„èŒƒ

### æ–‡ä»¶å‘½å
```rust
// âœ… æ­£ç¡®
gc_player.rs        // game-core ç©å®¶æ¨¡å—
gw_bridge.rs        // game-wasm æ¡¥æ¥æ¨¡å—
gs_room.rs          // game-server æˆ¿é—´æ¨¡å—

// âŒ é”™è¯¯
player.rs           // æ— å‰ç¼€ï¼Œä¸çŸ¥é“å±äºå“ªä¸ªæ¨¡å—
mod_player.rs       // éæ ‡å‡†å‰ç¼€
```

### ç»“æ„ä½“å‘½å
```rust
// âœ… æ­£ç¡®: å‰ç¼€ + PascalCase
pub struct GcPlayer { ... }
pub struct GcCard { ... }
pub struct GwGameBridge { ... }
pub struct GsRoomManager { ... }

// âŒ é”™è¯¯
pub struct Player { ... }         // æ— å‰ç¼€
pub struct playerData { ... }     // é PascalCase
pub struct GC_Player { ... }      // ä¸‹åˆ’çº¿ä¸å¯¹
```

### æšä¸¾å‘½å
```rust
// âœ… æ­£ç¡®
pub enum GcCardType { Attack, Defense, Skill }
pub enum GcPlayerState { Alive, Dead, Stunned }
pub enum GsRoomState { Waiting, Playing, Finished }

// æšä¸¾å˜ä½“ä¸éœ€è¦å‰ç¼€
pub enum GcCardType {
    Attack,      // âœ… ä¸æ˜¯ GcAttack
    Defense,     // âœ… ä¸æ˜¯ GcDefense
    Skill,       // âœ… ä¸æ˜¯ GcSkill
}
```

### å‡½æ•°å‘½å
```rust
// âœ… æ­£ç¡®: å‰ç¼€ + snake_case
pub fn gc_calculate_damage(...) -> u32 { ... }
pub fn gc_validate_action(...) -> Result<()> { ... }
pub fn gw_init() -> GwGameBridge { ... }
pub async fn gs_handle_connection(...) { ... }

// âŒ é”™è¯¯
pub fn calculateDamage(...) { ... }   // camelCase
pub fn CalculateDamage(...) { ... }   // PascalCase
pub fn calculate_damage(...) { ... }  // æ— å‰ç¼€
```

### å¸¸é‡å‘½å
```rust
// âœ… æ­£ç¡®: å‰ç¼€ + SCREAMING_SNAKE_CASE
pub const GC_MAX_HAND_SIZE: usize = 10;
pub const GC_DEFAULT_HP: u32 = 100;
pub const GS_MAX_ROOM_PLAYERS: usize = 4;

// âŒ é”™è¯¯
pub const MAX_HAND_SIZE: usize = 10;  // æ— å‰ç¼€
pub const gcMaxHandSize: usize = 10;  // éå…¨å¤§å†™
```

### æ¨¡å—å¯¼å‡º
```rust
// crates/game-core/src/lib.rs

// âœ… æ­£ç¡®: é‡æ–°å¯¼å‡ºæ—¶ä¿æŒå‰ç¼€
mod gc_player;
mod gc_card;
mod gc_battle;

pub use gc_player::*;
pub use gc_card::*;
pub use gc_battle::*;
```

---

## ğŸ“˜ TypeScript å‘½åè§„èŒƒ

### æ–‡ä»¶å‘½å
```typescript
// âœ… æ­£ç¡®: å‰ç¼€ + ä¸‹åˆ’çº¿åˆ†éš” + .ts
cl_game.ts
cl_scene_battle.ts
cl_entity_card.ts
cl_ui_hud.ts
cl_wasm_bridge.ts

// âŒ é”™è¯¯
game.ts              // æ— å‰ç¼€
ClGame.ts            // PascalCase æ–‡ä»¶å
cl-game.ts           // çŸ­æ¨ªçº¿
clGame.ts            // camelCase
```

### ç±»å‘½å
```typescript
// âœ… æ­£ç¡®: å‰ç¼€ + PascalCase
class ClGame { ... }
class ClSceneBattle { ... }
class ClEntityCard { ... }
class ClNetSocket { ... }

// âŒ é”™è¯¯
class Game { ... }           // æ— å‰ç¼€
class clGame { ... }         // é PascalCase
class CL_Game { ... }        // ä¸‹åˆ’çº¿
```

### æ¥å£å‘½å
```typescript
// âœ… æ­£ç¡®: å‰ç¼€ + PascalCase
interface ClGameConfig { ... }
interface ClSceneOptions { ... }

// æ¥è‡ª Rust çš„ç±»å‹ä¿æŒ Gc/Gs å‰ç¼€
interface GcPlayer { ... }      // æ¥è‡ª game-core
interface GcCard { ... }        // æ¥è‡ª game-core
interface GsRoomInfo { ... }    // æ¥è‡ª game-server
interface GsServerMsg { ... }   // æ¥è‡ª game-server
```

### å‡½æ•°å‘½å
```typescript
// âœ… æ¨¡å—çº§å‡½æ•°: å‰ç¼€ + camelCase
function clInitGame(config: ClGameConfig): ClGame { ... }
function clLoadAssets(manifest: ClAssetManifest): Promise<void> { ... }
function clWasmInit(): Promise<void> { ... }

// âœ… ç±»æ–¹æ³•: æ— å‰ç¼€
class ClGame {
    init(): Promise<void> { ... }      // âœ… ä¸æ˜¯ clInit
    update(dt: number): void { ... }   // âœ… ä¸æ˜¯ clUpdate
    dispose(): void { ... }            // âœ… ä¸æ˜¯ clDispose
}

// âŒ é”™è¯¯
function initGame(...) { ... }         // æ— å‰ç¼€
function ClInitGame(...) { ... }       // PascalCase å‡½æ•°å
```

### ç±»å‹åˆ«å
```typescript
// âœ… æ­£ç¡®: å‰ç¼€ + PascalCase
type ClSceneType = 'battle' | 'lobby' | 'loading';
type ClCardId = string;
type ClPlayerId = string;

// âŒ é”™è¯¯
type SceneType = ...;    // æ— å‰ç¼€
type clSceneType = ...;  // é PascalCase
```

### å¸¸é‡å‘½å
```typescript
// âœ… æ­£ç¡®: å‰ç¼€ + SCREAMING_SNAKE_CASE
const CL_CARD_WIDTH = 100;
const CL_CARD_HEIGHT = 140;
const CL_ANIMATION_DURATION = 300;

// âŒ é”™è¯¯
const CARD_WIDTH = 100;       // æ— å‰ç¼€
const clCardWidth = 100;      // éå…¨å¤§å†™
```

---

## ğŸ“‚ ç›®å½•å‘½å

```
// âœ… æ­£ç¡®: å…¨å°å†™ï¼Œæ— å‰ç¼€ (ç›®å½•å±‚çº§å·²è¡¨æ˜æ¨¡å—)
client/src/
â”œâ”€â”€ game/           # æ¸¸æˆæ ¸å¿ƒ
â”œâ”€â”€ scenes/         # åœºæ™¯
â”œâ”€â”€ entities/       # å®ä½“
â”œâ”€â”€ ui/             # ç•Œé¢
â”œâ”€â”€ wasm/           # WASM æ¡¥æ¥
â”œâ”€â”€ network/        # ç½‘ç»œ
â””â”€â”€ utils/          # å·¥å…·

// âŒ é”™è¯¯
â”œâ”€â”€ cl_game/        # ç›®å½•ä¸éœ€è¦å‰ç¼€
â”œâ”€â”€ Game/           # ä¸è¦ PascalCase
â”œâ”€â”€ cl-game/        # ä¸è¦çŸ­æ¨ªçº¿
```

---

## ğŸ” å‘½åæ£€æŸ¥æ¸…å•

### åˆ›å»ºæ–°æ–‡ä»¶æ—¶

```
â–¡ æ–‡ä»¶åæ˜¯å¦æœ‰æ­£ç¡®å‰ç¼€ï¼Ÿ (gc_, gw_, gs_, cl_)
â–¡ æ–‡ä»¶åæ˜¯å¦å…¨å°å†™ä¸‹åˆ’çº¿åˆ†éš”ï¼Ÿ
â–¡ æ”¾åœ¨æ­£ç¡®çš„ç›®å½•ä¸­ï¼Ÿ
```

### åˆ›å»ºæ–°ç±»å‹æ—¶

```
â–¡ ç»“æ„ä½“/ç±»/æ¥å£æ˜¯å¦æœ‰å‰ç¼€ï¼Ÿ (Gc, Gw, Gs, Cl)
â–¡ æ˜¯å¦ä½¿ç”¨ PascalCaseï¼Ÿ
â–¡ æšä¸¾å˜ä½“æ˜¯å¦ä¸éœ€è¦å‰ç¼€ï¼Ÿ
```

### åˆ›å»ºæ–°å‡½æ•°æ—¶

```
â–¡ Rust å…¬å¼€å‡½æ•°æ˜¯å¦æœ‰å‰ç¼€ï¼Ÿ (gc_, gw_, gs_)
â–¡ TypeScript æ¨¡å—çº§å‡½æ•°æ˜¯å¦æœ‰å‰ç¼€ï¼Ÿ (cl)
â–¡ ç±»æ–¹æ³•æ˜¯å¦ä¸éœ€è¦å‰ç¼€ï¼Ÿ
â–¡ æ˜¯å¦ä½¿ç”¨æ­£ç¡®çš„ caseï¼Ÿ (snake_case / camelCase)
```

---

## ğŸ“Š å¿«é€Ÿå‚è€ƒè¡¨

| ç±»å‹ | game-core | game-wasm | game-server | client |
|------|-----------|-----------|-------------|--------|
| **æ–‡ä»¶** | `gc_xxx.rs` | `gw_xxx.rs` | `gs_xxx.rs` | `cl_xxx.ts` |
| **ç»“æ„ä½“/ç±»** | `GcXxx` | `GwXxx` | `GsXxx` | `ClXxx` |
| **æšä¸¾** | `GcXxx` | `GwXxx` | `GsXxx` | `ClXxx` |
| **å‡½æ•°(æ¨¡å—)** | `gc_xxx()` | `gw_xxx()` | `gs_xxx()` | `clXxx()` |
| **å‡½æ•°(æ–¹æ³•)** | `xxx()` | `xxx()` | `xxx()` | `xxx()` |
| **å¸¸é‡** | `GC_XXX` | `GW_XXX` | `GS_XXX` | `CL_XXX` |
| **ç±»å‹åˆ«å** | `GcXxx` | `GwXxx` | `GsXxx` | `ClXxx` |

---

## âš ï¸ AI ä»£ç†å¿…è¯»

1. **æ–°å»ºä»»ä½•å†…å®¹å‰å…ˆç¡®è®¤æ¨¡å—** - ç”¨é”™å‰ç¼€æ˜¯ä¸¥é‡é—®é¢˜
2. **ä¸ç¡®å®šæ—¶æŸ¥æ­¤æ–‡æ¡£** - å‘½åè§„èŒƒä¸å¯å˜é€š
3. **å‘ç°å‘½åé”™è¯¯ç«‹å³ä¿®å¤** - ä¸è¦ç§¯ç´¯æŠ€æœ¯å€º
4. **è·¨æ¨¡å—å¼•ç”¨ä¿æŒåŸå‰ç¼€** - `GcPlayer` åœ¨ client ä¸­è¿˜æ˜¯ `GcPlayer`
